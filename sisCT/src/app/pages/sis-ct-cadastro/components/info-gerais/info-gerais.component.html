<form #f="ngForm" class="grid 3">
<div class="col-12">
  <h3>
    Quanto ao Registro
  </h3>
</div>
  <!-- CNPJ da Matriz -->
  <div class="col-12">
    <mat-form-field appearance="outline" class="w-full">
      <mat-label>CNPJ da Matriz</mat-label>
        <input
        matInput
        name="cnpj"
        [(ngModel)]="formModel.registro.cnpj"
        #cnpjFieldCtrl="ngModel"
        required
        mask="00.000.000/0000-00"
        (ngModelChange)="validateCnpj(cnpjFieldCtrl)"
        placeholder="00.000.000/0000-00"
      />
      <mat-hint>O CNPJ é primeira regra de identificação da entidade</mat-hint>
    </mat-form-field>
  </div>

    <div class="col-12 md-6">
    <mat-form-field appearance="outline" class="w-full">
      <mat-label>Email</mat-label>
      <input matInput name="email" [(ngModel)]="formModel.registro.emailInstitucional" />
    </mat-form-field>
  </div>

  <div class="col-12 md-6">
    <mat-form-field appearance="outline" class="w-full">
      <mat-label>Nome Fantasia</mat-label>
      <input matInput name="nomeFantasia" [(ngModel)]="formModel.registro.nomeFantasia" />
    </mat-form-field>
  </div>


<!-- Tipo de Contato -->
<div class="col-6">
  <mat-form-field appearance="outline" class="w-full">
    <mat-label>Tipo de Contato</mat-label>
    <mat-select
      name="tipoContato"
      [(ngModel)]="formModel.registro.tipoContato"
      required
    >
      <mat-option value="email">Email</mat-option>
      <mat-option value="telefone">Telefone</mat-option>
    </mat-select>
  </mat-form-field>
</div>

<!-- Contato (Email ou Telefone com ngx-mask) -->
<div class="col-6">
  <mat-form-field appearance="outline" class="w-full">
    <mat-label>Contato</mat-label>
    <input
      matInput
      name="contato"
      [(ngModel)]="formModel.registro.contato"
      #contatoCtrl="ngModel"
      [type]="formModel.registro.tipoContato === 'email' ? 'email' : 'tel'"
      [required]="true"
      [mask]="formModel.registro.tipoContato === 'telefone' ? '(00) 00000-0000' : ''"
      [placeholder]="formModel.registro.tipoContato === 'email' ? 'email@exemplo.com' : '(00) 00000-0000'"
      [pattern]="formModel.registro.tipoContato === 'email'
                  ? '^[^\\s@]+@[^\\s@]+\\.[^\\s@]{2,}$'
                  : '^(\\(\\d{2}\\)\\s?)?(\\d{4,5}\\-\\d{4})$'"
    />
    <mat-error *ngIf="contatoCtrl.invalid && contatoCtrl.touched">
      {{
        formModel.registro.tipoContato === 'email'
          ? 'Email inválido'
          : 'Telefone inválido. Use (00) 00000-0000'
      }}
    </mat-error>
  </mat-form-field>
</div>



    <!-- Atividade Principal -->
  <div class="col-6">
    <mat-form-field appearance="outline" class="w-full">
      <mat-label>Atividade Econômica Principal (CNAE)</mat-label>
      <input matInput name="atividadePrincipal" [(ngModel)]="formModel.registro.codigoDeAtividadesEconomicasPrimarias" />
      <mat-hint>Lista de seleção – ver qual a base de referência</mat-hint>
    </mat-form-field>
  </div>


  <!-- Atividade Secundária -->
  <div class="col-6">
    <mat-form-field appearance="outline" class="w-full">
      <mat-label>Atividades Econômicas Secundárias (CNAE)</mat-label>
      <input matInput name="atividadeSecundaria" [(ngModel)]="formModel.registro.codigoDeAtividadesEconomicasPrimarias" />
      <mat-hint>Lista de seleção – ver qual a base de referência</mat-hint>
    </mat-form-field>
  </div>


  <div class="col-12">
  <h3>
    Quanto à localização da matriz
  </h3>
</div>
  <!-- Botão de envio -->
  <div class="col-12">
    <button mat-raised-button color="primary" [disabled]="!f.valid">Salvar</button>
  </div>

</form>
